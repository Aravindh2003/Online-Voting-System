{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\sarav\\\\OneDrive\\\\Desktop\\\\Next24\\\\Elect.me\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\sarav\\\\OneDrive\\\\Desktop\\\\Next24\\\\Elect.me\\\\src\\\\pages\\\\Result.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Skeleton from './skeleton';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\n// let id;\nvar Result = function Result() {\n  var location = useLocation();\n  console.log(location.state.id);\n  var id = location.state.id;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    result = _useState2[0],\n    setResult = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoading = _useState4[0],\n    setIsLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isResultLoaded = _useState8[0],\n    setIsResultLoaded = _useState8[1];\n  var token = localStorage.getItem('token');\n  useEffect(function () {\n    // if(location.state !== null){\n    //   id = location.state.id;\n    // }\n    fetch('https://elect-server-opal.vercel.app/api/poll/result/' + id, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      //return res.json();\n      if (!res.ok) {\n        console.log(res);\n        throw Error(\"fetching is not successful\");\n      } else {\n        return res.json();\n      }\n    }).then(function (data) {\n      if (data.status === \"ok\") {\n        setResult(data.options);\n        setIsLoading(false);\n        setIsResultLoaded(true);\n        setError(null);\n      } else if (data.status === \"notok\") {\n        setError(\"Election has not finished yet\");\n        setResult(null);\n        setIsLoading(false);\n      }\n    }).catch(function (error) {\n      setError(error.message);\n      setIsLoading(false);\n    });\n  }, []);\n  console.log(result);\n  console.log(result);\n  var resultElements = result && result.map(function (index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"poll m-4 d-flex justify-content-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"poll__name text-center fs-4 fw-bold\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, \"Option: \", index.option), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"poll__name text-center fs-4 fw-bold\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, \"Votes: \", index.votes)));\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, error && /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }\n  }, error), isLoading && [1, 2, 3, 4, 5, 6, 7].map(function (n) {\n    return /*#__PURE__*/React.createElement(Skeleton, {\n      key: n,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 48\n      }\n    });\n  }), isResultLoaded && /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 26\n    }\n  }, \"Result\"), resultElements, result && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: 'auto',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    className: \"m-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    width: 600,\n    height: 300,\n    data: result,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"option\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    dataKey: \"votes\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(CartesianGrid, {\n    strokeDasharray: \"3 3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"votes\",\n    fill: \"#82ca9d\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default Result;","map":{"version":3,"names":["React","useState","useEffect","useLocation","Skeleton","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","Result","location","console","log","state","id","_useState","_useState2","_slicedToArray","result","setResult","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","error","setError","_useState7","_useState8","isResultLoaded","setIsResultLoaded","token","localStorage","getItem","fetch","headers","then","res","ok","Error","json","data","status","options","catch","message","resultElements","map","index","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","option","votes","n","key","style","margin","display","justifyContent","alignItems","width","height","dataKey","strokeDasharray","fill"],"sources":["C:/Users/sarav/OneDrive/Desktop/Next24/Elect.me/src/pages/Result.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Skeleton from './skeleton';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts'\r\n// let id;\r\nconst Result = () => {\r\n    \r\n    const location = useLocation();\r\n    console.log(location.state.id)\r\n    const id = location.state.id;\r\n\r\n  const [result, setResult] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isResultLoaded, setIsResultLoaded] = useState(false);\r\n  const token = localStorage.getItem('token');\r\n  useEffect(() => {\r\n    // if(location.state !== null){\r\n    //   id = location.state.id;\r\n    // }\r\n    fetch('https://elect-server-opal.vercel.app/api/poll/result/'+id,{headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer '+token,\r\n    },}).then((res) => {\r\n      //return res.json();\r\n      if(!res.ok){\r\n        console.log(res)\r\n        throw Error(\"fetching is not successful\");\r\n      }\r\n      else {\r\n        return res.json();\r\n      }\r\n    }).then((data) => {\r\n      if(data.status===\"ok\"){\r\n        setResult(data.options);\r\n        setIsLoading(false);\r\n        setIsResultLoaded(true);\r\n        setError(null);\r\n      }else if(data.status === \"notok\"){\r\n        setError(\"Election has not finished yet\");\r\n        setResult(null);\r\n        setIsLoading(false);\r\n      }\r\n      \r\n    }).catch((error) => {\r\n      setError(error.message);\r\n      setIsLoading(false);\r\n    });\r\n  }, []);\r\n  console.log(result)\r\n  console.log(result)\r\n\r\n  const resultElements = result && result.map((index) =>\r\n  <div className='d-flex justify-content-center'>\r\n      <article className=\"poll m-4 d-flex justify-content-center\">\r\n        <p className=\"poll__name text-center fs-4 fw-bold\">Option: {index.option}</p>\r\n        <p className=\"poll__name text-center fs-4 fw-bold\">Votes: {index.votes}</p>\r\n      </article>\r\n    \r\n  </div>\r\n    );\r\n\r\n  return (\r\n    <div>\r\n      \r\n        {error && <p>{error}</p>}\r\n      {isLoading && [1,2,3,4,5,6,7].map((n) => <Skeleton    key={n}/>)}\r\n      {isResultLoaded && <h1 className=\"text-center\">Result</h1>}\r\n        {resultElements}\r\n        {result &&\r\n          <div style={{margin: 'auto',display: 'flex',justifyContent: 'center', alignItems: 'center'}} className='m-5'>\r\n            <BarChart width={600} height={300} data={result}>\r\n          <XAxis dataKey=\"option\" />\r\n          <YAxis dataKey=\"votes\"/>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <Tooltip />\r\n          <Legend />\r\n          {/* <Bar dataKey=\"option\" fill=\"#8884d8\" /> */}\r\n          <Bar dataKey=\"votes\" fill=\"#82ca9d\" />\r\n        </BarChart>\r\n            </div>}\r\n        \r\n\r\n       </div>\r\n  )\r\n}\r\n\r\nexport default Result"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}